<!DOCTYPE html>

<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta http-equiv="Content-Language" content="en">
<link rel="alternate" hreflang="en" href=" /53726823/"/>


  <title>Integrating the Doc Generator - SG Developer</title>

  

  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:100,300,400,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/tk-doc-generator/assets/css/just-the-docs.css">
  
  <script type="text/javascript" src="/tk-doc-generator/assets/js/just-the-docs.js"></script>
  <script type="text/javascript" src="/tk-doc-generator/assets/js/vendor/anchor.min.js"></script>

  

  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>



<body>

  <div class="page-wrap">

    <div class="side-bar">
      <a href="/tk-doc-generator" class="site-title fs-6 lh-tight">SG Developer</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>    
      <div class="navigation main-nav js-main-nav">

        
    
        <nav>

    

        <div class="nav-top-level" style="margin-top:15px; margin-bottom:5px">
            Authoring docs
        </div>

        

            

            
            
            

            

            
            

            
            

            
                


    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/19bd79d8/?title=Introduction"
            >
                Introduction
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry-non-expanded"
                
                
                href="/tk-doc-generator/5ce7545e/?title=Markdown+syntax"
            >
                Markdown syntax
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







                
            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/e68c34ca/?title=Figures+and+Diagrams"
            >
                Figures and Diagrams
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry-non-expanded"
                
                
                href="/tk-doc-generator/a0c60e02/?title=Table+of+contents"
            >
                Table of contents
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    







                
            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/125e05f9/?title=Custom+Landing+Page"
            >
                Custom Landing Page
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/c8bab2ae/?title=Local+Preview"
            >
                Local Preview
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/78b64024/?title=Page+URLs"
            >
                Page URLs
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        
    

        <div class="nav-top-level" style="margin-top:15px; margin-bottom:5px">
            Installation
        </div>

        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry-selected"
                
                
                href="/tk-doc-generator/53726823/?title=Integrating+the+Doc+Generator"
            >
                Integrating the Doc Generator
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/f1564ec9/?title=Configuring+Languages"
            >
                Configuring Languages
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    







            
            
        
    

        <div class="nav-top-level" style="margin-top:15px; margin-bottom:5px">
            Developing tk-doc-generator
        </div>

        

            

            
            
            

            

            
            

            
            

            
                


    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        

            <div>

            <a
                
                    class="nav-entry"
                
                
                href="/tk-doc-generator/ab47ab26/?title=Technical+Details"
            >
                Technical Details
            </a>
            </div>

        
    
        
    
        
    
        
    
        
    
        
    







            
            
        
    
</nav>
      </div>
      <footer role="contentinfo" class="site-footer">

            <p class="text-grey-dk-000 fs-2 fw-300" style="text-align: right">

                <i class="fa fa-globe" style="font-size:14px; padding-right: 10px;"></i>
                <select onChange="window.location.href = this.value">

                    
                        <option  selected  value="/tk-doc-generator/53726823/">English</option>
                    
                </select>

            </p>
            <p><a data-opt-in-preferences href="javascript:;" id="privacy_set">Privacy settings</a></p>
          <p><a data-wat-linkname="manage-ccpa-settings-footer-link" href="javascript:;">Do not sell my personal information</a></p>
          <p><a href="https://www.autodesk.com/company/legal-notices-trademarks/privacy-statement">Privacy/Cookies</a></p>
      </footer>
    </div>



    <div class="main-content-wrap">
      <div class="page-header">
        <div class="main-content" style="padding: 0;">
          <banner role="alert">
  <figure class="icon">
    <svg width="24px" height="24px" class="icon-image">
      <path d="M12 2L2 12l10 10 10-10zM3.41 12L12 3.41 20.59 12 12 20.59z"></path>
      <circle cx="12" cy="15" r="1"></circle>
      <path d="M11.88 13h.24a.55.55 0 00.54-.5L13 8a1 1 0 00-2 0l.34 4.5a.55.55 0 00.54.5z"></path>
    </svg>
  </figure>
  <text-box>
    <message>
      Our Developer documentation has relocated and this site will be discontinued soon.
      <span>
        <a target="_blank" style="text-decoration: none; color: #0696D7;" href="https://help.autodesk.com/view/SGDEV/ENU/">Visit our new Developer Help Center here.</a>
      </span>
    </message>
  </text-box>
</banner>
          
          
        </div>
      </div>
      <div class="main-content">

        <div class="page-content">

              

            <h1 id="integrating-the-doc-generator-with-your-repository">Integrating the Doc Generator with your repository</h1>

<p>This repository makes it easy to generate documentation for 
ShotGrid Ecosystem and Toolkit related repositories.</p>

<h2 id="what-does-the-repo-do">What does the repo do?</h2>

<p>Integrate this repository as a submodule in a Toolkit App or other 
ShotGrid App that benefits and it will:</p>

<ul>
  <li>Convert any markdown in the <code class="highlighter-rouge">/docs</code> folder into multi-language html.</li>
  <li>Provide a consistent look and feel to build output.</li>
  <li>Convert any rst/sphinx files in the <code class="highlighter-rouge">/docs</code> folder into multi-language html.</li>
  <li>Automatically build and deploy documentation that is pushed to master.</li>
  <li>Automatically build a full site preview for each commit in a pull request. The previews are stored in an AWS S3 bucket of your choosing.</li>
  <li>Allow you to run local (docker based) previews.</li>
  <li>Allow you to generate a full reference collection site, where sphinx/rst
docs from multiple repositories are collected and generated as a single release.</li>
</ul>

<h3 id="is-it-difficult-to-set-up">Is it difficult to set up?</h3>

<p>We recommend a devops or developer to set up the documentation intially. Once set up, it is very easy to author and manage
the documentation. For the setup phase, you need a basic 
understanding of git, github, CI (travis especially) and AWS.</p>

<h3 id="tech-info">Tech info</h3>

<ul>
  <li><a href="http://www.sphinx-doc.org/">Sphinx</a> is used to convert rst into markdown</li>
  <li><a href="https://jekyllrb.com/">Jekyll</a> is used to convert markdown into a html website</li>
  <li><a href="https://github.com/shotgunsoftware/just-the-docs">SG just-the-docs</a> is the jekyll theme used to render the site.</li>
  <li><a href="https://github.com/shotgunsoftware/sphinx-markdown-builder">SG sphinx-markdown-builder</a> is used to convert sphinx code into markdown.</li>
</ul>

<h2 id="setting-up-doc-generation">Setting up doc generation</h2>

<p>In order to use it for your repository, you need the following:</p>

<ul>
  <li>Documentation (in markdown or <code class="highlighter-rouge">rst</code> form) located in a <code class="highlighter-rouge">/docs</code> folder.</li>
  <li>Add this repository as a submodule of your repo in the folder <code class="highlighter-rouge">/tk-doc-generator</code>.</li>
  <li>An AWS S3 bucket set up for public web access if you want PR based previews.</li>
  <li>A location to deploy your target website. We recommend 
<a href="https://pages.github.com/">github pages</a> and this is what the 
examples are based on.</li>
  <li><a href="https://travis-ci.org">Travis</a> for CI. For more information about how to set this up,
see the section below.</li>
</ul>

<h2 id="configuration-file">Configuration file</h2>
<p>The doc generator comes with a <a href="https://github.com/shotgunsoftware/tk-doc-generator/blob/master/jekyll/_config.yml">default jekyll configuration file</a>. If you wish to override any settings, you can add a 
<code class="highlighter-rouge">jekyll_config.yml</code> file into the root level of your repository.</p>

<h2 id="integrating-with-travis-ci">Integrating with Travis CI</h2>

<p>Once you have set up this repository as a submodule to your code, setting up 
travis CI or adding it to an existing CI is easy.</p>

<h3 id="using-an-example">Using an example</h3>

<p>If you prefer to work off an example rather than setting things up from scratch, we recommend making a clone of the <a href="https://github.com/shotgunsoftware/shotgunsoftware.github.io">ShotGrid developer site</a> as a starting point.</p>

<h3 id="environment-variables">Environment variables</h3>

<p>The following environment variables should be defined in the travis <code class="highlighter-rouge">.travis.yml</code> file:</p>

<ul>
  <li><code class="highlighter-rouge">DOC_URL</code> - The target url where released docs will go, e.g. <code class="highlighter-rouge">https://developer.shotgridsoftware.com</code>.</li>
  <li><code class="highlighter-rouge">DOC_PATH</code> - The path where the released docs will go, e.g. <code class="highlighter-rouge">/dev-docs</code>.</li>
  <li><code class="highlighter-rouge">S3_BUCKET</code> - the name of a publicly accessible S3 bucket, in website hosting mode, e.g. <code class="highlighter-rouge">mybucket</code>.</li>
  <li><code class="highlighter-rouge">S3_WEB_URL</code> - the website url where the bucket can be accessed, e.g. <code class="highlighter-rouge">http://mybucket.s3-website.eu-west-2.amazonaws.com</code>.</li>
</ul>

<h3 id="travis-secret-preferences">Travis secret preferences</h3>

<p>The following (secret) environment variables should be defined in the travis preferences:</p>

<ul>
  <li><code class="highlighter-rouge">AWS_S3_ACCESS_KEY</code> - AWS access key with permissions to put new items into the <code class="highlighter-rouge">S3_BUCKET</code>.</li>
  <li><code class="highlighter-rouge">AWS_S3_ACCESS_TOKEN</code> - AWS access token with permissions to put new items into the <code class="highlighter-rouge">S3_BUCKET</code>.</li>
  <li><code class="highlighter-rouge">GITHUB_TOKEN</code> - Github access token used to create a comment on the PR with a link to the built docs.</li>
</ul>

<h3 id="folder-locations">Folder locations</h3>

<ul>
  <li>Your documentation needs to be located in <code class="highlighter-rouge">/docs</code>.</li>
  <li>The build output will be generated in <code class="highlighter-rouge">/_build</code> (see travis example below).</li>
</ul>

<h3 id="setting-up-a-github-access-token">Setting up a github access token</h3>

<p>In order for the CI to deploy to the <code class="highlighter-rouge">gh-pages</code> branch, you need to provide it with an access token
so that it can use github on your behalf. You can generate one by going to your personal settings, 
developer, access tokens. Make sure you restrict the access token to only have access to public repos:</p>

<p><img src="../images/installation/github_access_token.png" alt="access_token" /></p>

<h3 id="example-travisyml-file">Example <code class="highlighter-rouge">.travis.yml</code> file</h3>

<p>The following travis file illustrates how to integrate:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">language</span><span class="pi">:</span> <span class="s">python</span>

<span class="na">global</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">DOC_URL=https://developer.shotgridsoftware.com</span>
    <span class="pi">-</span> <span class="s">DOC_PATH=/tk-doc-generator</span>
    <span class="pi">-</span> <span class="s">S3_BUCKET=my-preview-bucket</span>
    <span class="pi">-</span> <span class="s">S3_WEB_URL=http://my-preview-bucket.s3-website.my-region.amazonaws.com</span>


<span class="na">python</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">2.7"</span>

<span class="na">cache</span><span class="pi">:</span>
  <span class="na">pip</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">directories</span><span class="pi">:</span>
     <span class="c1"># manually cache ruby dependencies</span>
     <span class="pi">-</span> <span class="s">$TRAVIS_BUILD_DIR/tk-doc-generator/vendor/bundle</span>

<span class="na">before_install</span><span class="pi">:</span>
  <span class="c1"># required dependency for sphinx</span>
  <span class="pi">-</span> <span class="s">sudo apt-get install -y pandoc</span>

<span class="na">install</span><span class="pi">:</span>
  <span class="c1"># </span>
  <span class="c1"># install pyside - from https://stackoverflow.com/questions/24489588</span>
  <span class="pi">-</span> <span class="s">sudo apt-get install libqt4-dev</span>
  <span class="pi">-</span> <span class="s">pip install PySide --no-index --find-links https://parkin.github.io/python-wheelhouse/;</span>
  <span class="pi">-</span> <span class="s">python ~/virtualenv/python${TRAVIS_PYTHON_VERSION}/bin/pyside_postinstall.py -install</span>
  <span class="c1">#</span>
  <span class="c1"># jekyll dependencies</span>
  <span class="pi">-</span> <span class="s">bundle install --gemfile=./tk-doc-generator/Gemfile --deployment</span>
  <span class="c1">#</span>
  <span class="c1"># sphinx dependnecies</span>
  <span class="pi">-</span> <span class="s">pip install -r ./tk-doc-generator/requirements.txt</span>

<span class="na">script</span><span class="pi">:</span>
  <span class="c1"># script that runs the CI and handles S3 previews</span>
  <span class="pi">-</span> <span class="s">python ./tk-doc-generator/travis-generate-docs.py</span>

<span class="na">deploy</span><span class="pi">:</span>
  <span class="c1"># When commiting to master, auto-deploy to github-pages</span>
  <span class="c1"># This will copy the contents of the _build folder to gh-pages branch and push</span>
<span class="pi">-</span> <span class="na">provider</span><span class="pi">:</span> <span class="s">pages</span>
  <span class="na">local-dir</span><span class="pi">:</span> <span class="s">./_build</span>
  <span class="na">target-branch</span><span class="pi">:</span> <span class="s">gh-pages</span>
  <span class="na">skip-cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">github-token</span><span class="pi">:</span> <span class="s">$GITHUB_TOKEN</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="c1"># only do this when on the master branch</span>
    <span class="na">branch</span><span class="pi">:</span> <span class="s">master</span>
</code></pre></div></div>

<h2 id="running-locally">Running locally</h2>

<p>In order to run the setup manually, you need docker installed.
Simply use the <code class="highlighter-rouge">/preview_docs.sh</code> script located in the root folder of
this repo in order to build the documents.</p>

<h2 id="github-shields">Github Shields</h2>

<p>We recommend using the following shield to highlight that there are documentation
build using the <code class="highlighter-rouge">tk-doc-generator</code>:</p>

<p><a href="http://github.com/shotgunsoftware/tk-doc-generator"><img src="https://img.shields.io/badge/Built%20With-SG%20Doc%20Generator-blue.svg" alt="Doc Generator" /></a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[![Doc Generator](https://img.shields.io/badge/Built%20With-SG%20Doc%20Generator-blue.svg)](http://github.com/shotgunsoftware/tk-doc-generator)
</code></pre></div></div>

<h2 id="configuring-search">Configuring Search</h2>

<p>The documentation system supports integration with <a href="https://cse.google.com">Google Custom Search</a>. This makes it easy to integrate site specific search results. This is disabled by default - in order to enable it, set up a google custom search profile and then add its search engine id into the configuration:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># add a google custom search box</span>
<span class="c1"># (see https://developers.google.com/custom-search/docs/element)</span>
<span class="na">google_custom_search_id</span><span class="pi">:</span> <span class="s">your_search_key_here</span>
</code></pre></div></div>



              

            

            
        </div>
      </div>

      <div class="main-content" style="background-color: white; height: 50px;">
      </div>

      <div class="main-content" >
        <hr style="margin: 0px">
        <p class="text-grey-dk-000 fs-2 fw-300" style="text-align: right">
          <i class="fa fa-github"></i> <a target="_blank" href="https://github.com//en/installation/integrating.md" >Edit this document</a><br/>
        </p>
      </div>

    </div>

  </div>

  <script type="text/javascript">
    /**
     * AnchorJS v3.2.0 options and selector
     */
    anchors.add();

    // decorate all external links with a style and open in new tab
    (function() {
      var links = document.links;
      for (var i = 0, linksLength = links.length; i < linksLength; i++) {
        // temp fix: make sure sphinx repos on developer site appear as external links from dev site.
        if (links[i].pathname.startsWith('/tk-doc-generator')) {
            // no external links for the doc generator - but for all other developer site /tk-links
            continue;
        }
        if (links[i].hostname != window.location.hostname || links[i].pathname.startsWith('/tk-') || links[i].pathname.startsWith('/sg-') || links[i].pathname.startsWith('/python-api') || links[i].pathname.startsWith('/rest-api') ) {
          links[i].target = '_blank';
          links[i].className += ' external-link-decoration';
        }
      }
    })();

  </script>

  <script type="text/javascript">
    window.wafCCPAForceShow = true;
    (function(a,b,c,d){
      a='https://tags.tiqcdn.com/utag/autodesk/micro-basic/prod/utag.js';
      b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
      a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
    })();
  </script>
  <script type="text/javascript">
    document.getElementById("privacy_set").target = "_self";
  </script>
</body>
</html>
